# Documentation

> [Jairus Joer](mailto:hello@jairusjoer.com), 2024

> *The texts in this documentation were partially generated by artificial 
  intelligence and corrected and revised by us.*

## Reference documents

<!-- Provide references to software used in the project -->

- [Astro](https://docs.astro.build/en/getting-started/) 4.1.1
- [Class Variance Authority](https://cva.style/docs) 0.7.0  
- [React](https://react.dev/reference/react) 18.2.0
- [TailwindCSS](https://tailwindcss.com/docs/installation) 3.4.1

## Project

### Description

<!-- Describe the project and its specified use case in detail -->

This fork of [`astro-boilerplate`](https://github.com/aggregata/astro-boilerplate) 
extends the capabilities of the Astro Boilerplate, allowing developers to more 
easily use modern development frameworks and tools, and providing a more robust 
out-of-the-box experience.

The tools and frameworks provided in the boilerplate are optimized for a more 
streamlined development process, enabling the use of static site generation 
(SSG) in combination with webhooks or opt for [server side rendering (SSR)](https://docs.astro.build/en/guides/server-side-rendering/) 
with an adapter.

Paired with [React](#reference-documents), a proven library for web interfaces, 
this stack enables developers to create rich, beautiful products.


### Requirements

<!-- List the requirements to fulfill the described use case -->

1. **Versatile Framework**
    - Deliver a solid foundation for back- and front-end web applications.

2. **No Vendor Lock-in**
    - Must deploy to multiple hosting providers without losing functionality.

3. **Efficient Development**
    - Real-time development preview and feedback.

4. **Strongly typed**
    - Supports TypeScript or JSDoc throughout the project.

5. **Modular Extensions**
    - Extensible architecture supporting seamless integration of plugins.

6. **Community & Support**
    - Provides an established community and support system, such as a forum.

### Architecture

<!-- Outline the architecture that enables the use case -->

1. **Versatile Framework**
    - Astro is usable as a SSG or SSR framework and enables the use of 
      server-side JavaScript/TypeScript.
    - React is a proven frontend library with an extensive collection of 
      third-party libraries to enhance any application

2. **No Vendor Lock-in**
    - Astro offers deployment as a static site on any server or as a 
      server-side rendered site with SSR adapters and first-class support from 
      Astro and established hosting providers.

3. **Efficient Development**
    - The bundler implements a Hot Module Replacement for scalable products.
    - Astro injects a developer toolbar into the development environment for 
      real-time auditing.

4. **Strongly typed**
    - All referenced tools are built using TypeScript.
    - Astro dynamically generates required types on startup.

5. **Modular Extensions**
    - Astro offers an extensive collection of the latest first- and third-party 
      integrations for UI frameworks, SSR adapters, and other features.

6. **Community & Support**
    - Astro's repository has over 38.8K stars as of this writing and is one 
      of the most most anticipated meta frameworks in various surveys.
    - Astro's community Discord server lists over 24.9K members.

### Status

<!--
  List the current status of the project:
  [Upcoming, Pending, Overdue, Not started, Active, Priority, Canceled]
-->

The current status of the project is: **Pending**.

Most of the recently implemented features and solutions are in the process of 
standardization and awaiting documentation.

### Roadmap

<!-- List future requirements or planned features -->

In addition to minor enhancements to improve support for third-party libraries s
uch as [`shadcn/ui`](https://ui.shadcn.com/), the main focus of development is 
to extend support for design systems and preconfigured feature snippets:

- Add `<Compliance>` React component to load third-party GDPR compliant embeds.
- Add `<Share>` React component to support and use native share dialogs.
- Add `<Icon>` Astro component to statically render public `.svg` icons.

### Additional information

<!-- Provide additional information about the project, if applicable -->

- [TailwindCSS](#reference-documents) is used for styling 
  and therefore provides its own CSS reset and normalization. To disable this 
  feature, remove the `@tailwind` at-rules from `assets/styles/globals.scss`.

- [Unlighthouse](#reference-documents) is installed and allows parallel 
  auditing of all crawlable pages within the project.

- While support for component libraries such as `shadcn/ui` is enabled, 
  the underlying design system has been enhanced with additional tokens.

#### Hydrating interactive components

Astro is a static site generator that renders framework components as static 
HTML by default. To enable hydration for framework components, use the 
[`client:*` directives](https://docs.astro.build/en/reference/directives-reference/#client-directives), such as `<Example client:load />`. 
Learn more on [hydrating interactive components](https://docs.astro.build/en/guides/framework-components/#hydrating-interactive-components)

#### Passing props to framework components

Serializable data types are required when passing props to 
framework components. Although serialized props can be passed from Astro 
components to framework components, the reverse is not possible.
Learn more on [passing props to framework components](https://docs.astro.build/en/guides/framework-components/#passing-props-to-framework-components).

## Source code

### Dependencies

<!-- 
  List external dependencies used in the project that are not visible in 
  package.json or composer.json
-->

This project does not use any undocumented third-party dependencies outside 
of NPM.

### Internal solutions

<!--
  List internal solutions used in the project or specifically built for 
  the project
-->

#### Utilities

`utilities.ts` collects various functions to support theming and common 
interactions and their corresponding interfaces.

1. `cn()`
    - Accepts CSS classes and conditional logic with `clsx()` to resolve 
      TailwindCSS class conflicts and returns a string of the computed classes.
2. `local()`
    - Reads and writes formatted JSON to and from `localStorage`
3. `sleep()`
    - Waits in asynchronous code blocks for the specified number of miliseconds.

#### Metadata

To extend a project's SEO capabilities, we've developed a `meta.astro` 
component, which utilizes the component's `Props` interface to fill in 
available information for crawlers to access. By default, this component is 
automatically implemented for all sites from the `root.astro` layout.

Metadata can be passed as a property to the root layout component from any 
page on which the root layout is implemented.

```astro
---
import Root from "@/layouts/root.astro";

const meta = {
  title: "Hello World",
};
---

<Root {meta}>
  <!-- ... -->
</Root>
```

#### Feature flags

`feature.tsx` uses the project's feature flags to render wrapped elements only 
in the specified environment or below. It also provides a colored context box 
for wrapped elements on hover.

*The component does not rely on [Client Directives](https://docs.astro.build/en/reference/directives-reference/#client-directives) and can be 
rendered statically.*

```tsx
<Feature flag="development">   
  <h3>Example for the usage of React components</h3>
  <p>
    The <code>&lt;Example&gt;</code> component gets statically rendered and hydrated.
    <a href="https://docs.astro.build/de/reference/directives-reference/#clientload">Learn more</a>.
  </p>
  <Example client:load />
</Feature>
```


### Maintenance and troubleshooting

<!-- Describe how to maintain, troubleshoot and debug the project -->

Astro provides a suite of debugging and troubleshooting tools to facilitate the 
development of of modern web applications. While in most cases Astro will 
provide a detailed error message and a link to the referenced file in the 
browser, in some cases more specific data needs to be accessed.

In this case, Astro provides a `<Debug>` component and a guides for common 
gotchas and reproduction steps. [Learn more about debugging with Astro](https://docs.astro.build/en/guides/troubleshooting/).